import board
import pwmio
import time
import math

open_melody = [
    (0,     0.50),   
    (392,   0.25),  
    (370,   0.25),  
    (392,   0.25),
    (440,   0.25),  

    (494,   0.375),  
    
    (0,     0.25), 
    
    (392,   0.25),
    (440,   0.25),
    (494,   0.25),
    
    (0,     0.25), 
    
    (392,   0.25),
    (440,   0.25),
    (494,   0.25),
    
    (0,     0.25), 
    
    (587,   0.375), 
    (440,   0.25),
    
    (0,     0.25), 

    (440,   0.375),
    
    (0,     0.25),
    
    (370,   0.25), 
    (392,   0.25),
    (440,   0.25),
    
    (0,     0.25), 
    
    (294,   0.25), 

    (440,   0.25),
    (392,   0.25),
    (370,   0.25),
    (392,   0.25)
]

end_melody = [

    (370, 0.5), (0, 0.1),
    (220, 0.25), (294, 0.5), (330, 0.5), (220, 0.5),(277, 0.5), (0, 0.1),
    
    (294, 0.5), (0, 0.1),
    (185, 0.25), (247, 0.25), (294, 0.25),
    (277, 0.25), (294, 0.25), (277, 0.25), (247, 0.25), (220, 0.375), (0, 0.25),
    
    (247, 0.75),(196, 0.25), (247, 0.5), (220, 0.5), (185, 0.5),(220, 0.5), (247, 0.5),(0, 0.25),
    (247, 0.5),(0, 0.1),
    (494, 0.25), (440, 0.25), (392, 0.25), (370, 0.25), (330, 0.5), (294, 0.5), (277, 0.5),(0, 0.25),
    
    (294, 0.25), (370, 0.25), (440, 0.5), (587, 1), (554, 1), (0, 0.25),
    (294, 0.25), (370, 0.25), (440, 0.5), (587, 0.5), (554, 0.25), (587, 0.25), (554, 0.25), (494, 0.25), (440, 0.25),(0, 0.25),
    (294, 0.25), (370, 0.25), (440, 0.5), (587, 0.5), (587, 0.5),  (554, 0.625), (0, 0.25),
    (440, 0.25), (440, 0.25), (392, 0.25), (370, 0.5), (330, 0.5), (294, 0.5), (330, 1.0)
]

hurt_sound = [(370, 0.5)]
pass_sound = [(370, 0.5), (0, 0.1),(220, 0.25), (294, 0.5), (330, 0.5), (220, 0.5),(277, 0.5), (0, 0.1)]
skill_sound = [(294, 0.25), (370, 0.25), (440, 0.5)]

def tone(pin, freq, duration):
    if freq == 0:
        time.sleep(duration)
        return
    b = pwmio.PWMOut(pin, frequency=freq, duty_cycle=32768)
    time.sleep(duration)
    b.deinit()

def play_melody(melody):
    for freq, dur in melody:
        tone(board.D7, freq, dur)
        time.sleep(0.02)

def breathing_color(base_color, t):
    breathe = 0.1 + 0.5 * (0.5 + 0.5*math.sin(t/3))
    r = int(base_color[0] * breathe)
    g = int(base_color[1] * breathe)
    b = int(base_color[2] * breathe)
    return (r, g, b)

def HP_show(HP,pixels):
    for i in range(HP):
        pixels[i+1]=(150,150,150)
    for i in range(HP,3):
        pixels[i+1]=(0,0,0)
    pixels.show()

